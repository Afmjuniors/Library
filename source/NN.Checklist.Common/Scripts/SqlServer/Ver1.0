 
INSERT INTO DEPENDENCIES_ITEMS_VERSIONS_CHECKLISTS_TEMPLATES (item_version_checklist_template_id,dependent_block_version_checklist_template_id,dependent_item_version_checklist_template_id,dependent_version_checklist_template_id)  
select sum(t.a),  sum(t.b) , null,null 
from (  
select b.block_version_checklist_template_id as a, 0 as b  
from VERSIONS_CHECKLISTS_TEMPLATES v  
join checklists_templates c on v.checklist_template_id = c.checklist_template_id  
join BLOCKS_VERSIONS_CHECKLISTS_TEMPLATES b on v.version_checklist_template_id = b.version_checklist_template_id  
where c.description = 'Checklist A12 AP - ANP: Approval for next process' and (b.position = 2 and b.parent_block_version_checklist_template_id is NULL) 
union   
select 0 as a, b.block_version_checklist_template_id as b 
from VERSIONS_CHECKLISTS_TEMPLATES v 
join checklists_templates c on v.checklist_template_id = c.checklist_template_id 
join BLOCKS_VERSIONS_CHECKLISTS_TEMPLATES b on v.version_checklist_template_id = b.version_checklist_template_id 
where c.description = 'Checklist A12 AP - ANP: Approval for next process' and (b.position = 1 and b.parent_block_version_checklist_template_id is NULL)
) t; 
 
INSERT INTO DEPENDENCIES_BLOCKS_VERSIONS_CHECKLISTS_TEMPLATES (block_version_checklist_template_id,dependent_block_version_checklist_template_id,dependent_item_version_checklist_template_id, dependent_version_checklist_template_id) 
select sum(t.a), null, sum(t.b), null 
from ( 
select b.block_version_checklist_template_id as a, 0 as b 
from VERSIONS_CHECKLISTS_TEMPLATES v 
join checklists_templates c on v.checklist_template_id = c.checklist_template_id 
join BLOCKS_VERSIONS_CHECKLISTS_TEMPLATES b on v.version_checklist_template_id = b.version_checklist_template_id 
where c.description = 'Checklist A12 AP - ANP: Approval for next process' and b.position = 2 and b.parent_block_version_checklist_template_id is NOT NULL 
union  
select 0 as a, b.item_version_checklist_template_id as b  
from VERSIONS_CHECKLISTS_TEMPLATES v  
join checklists_templates c on v.checklist_template_id = c.checklist_template_id  
join ITEMS_VERSIONS_CHECKLISTS_TEMPLATES b on v.version_checklist_template_id = b.version_checklist_template_id  
where c.description = 'Checklist A12 AP - ANP: Approval for next process' and b.position = 15  
) t; 
 