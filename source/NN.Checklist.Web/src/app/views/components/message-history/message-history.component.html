<div class="my-container">
	<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>
</div>
<div class="kt-portlet" style="margin-top: 0px;">
	<div class="kt-portlet__head kt-portlet__head__custom" z>
		<div class="kt-portlet__head-label">
			<h3 class="kt-portlet__head-title">{{ "MESSAGES_HISTORY" | translate }}</h3>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-12">
			<div style="margin-top: 15px;" class="row">
				<div class="col-lg-12 text-center">
					<div class="mat-table__wrapper">
						<mat-table class="lmat-elevation-z8" #table [dataSource]="dataSource" matSort #sort1="matSort"
							matSortActive="id" matSortDirection="asc" matSortDisableClear>
							<!-- Checkbox Column -->

							<!-- Table with selection -->
							<!-- https://run.stackblitz.com/api/angular/v1?file=app%2Ftable-selection-example.ts -->
							<ng-container matColumnDef="action">
								<mat-header-cell *matHeaderCellDef>{{ "STATUS" | translate }}</mat-header-cell>
								<mat-cell *matCellDef="let message" (click)="viewStatus(message)">{{message.status}}</mat-cell>
							</ng-container>

							<ng-container matColumnDef="datetime">
								<!-- ATTRIBUTE mat-sort-header  for sorting | https://material.angular.io/components/sort/overview -->
								<mat-header-cell *matHeaderCellDef mat-sort-header>{{ "MENU.MESSAGE" | translate }}</mat-header-cell>
								<mat-cell *matCellDef="let message" (click)="viewStatus(message)">{{message.dateTimeCreation | date:'yyyy-MM-dd HH:mm:ss'}}</mat-cell>
							</ng-container>

							<ng-container matColumnDef="type">
								<mat-header-cell *matHeaderCellDef mat-sort-header>{{ "NOTIFICATION_TYPE" | translate }}
								</mat-header-cell>
								<mat-cell *matCellDef="let message" (click)="viewStatus(message)">{{message.typeNotificationChannelName}}</mat-cell>
							</ng-container>

							<ng-container matColumnDef="destiny">
								<mat-header-cell *matHeaderCellDef mat-sort-header>{{ "DESTINY" | translate }}
								</mat-header-cell>
								<mat-cell *matCellDef="let message" (click)="viewStatus(message)">{{message.number}}</mat-cell>
							</ng-container>

							<ng-container matColumnDef="addressee">
								<mat-header-cell *matHeaderCellDef mat-sort-header>{{ "ADDRESSEE" | translate }}
								</mat-header-cell>
								<mat-cell *matCellDef="let message" (click)="viewStatus(message)">
									<span *ngIf="message.userInitials">
										{{message.userInitials.toUpperCase()}}
									</span>
								</mat-cell>
							</ng-container>

							<ng-container matColumnDef="subject">
								<mat-header-cell *matHeaderCellDef mat-sort-header>{{ "SUBJECT" | translate }}
								</mat-header-cell>
								<mat-cell *matCellDef="let message" (click)="viewStatus(message)">{{message.subject }}</mat-cell>
							</ng-container>

							<ng-container matColumnDef="message">
								<mat-header-cell *matHeaderCellDef mat-sort-header>{{ "MESSAGE" | translate }}
								</mat-header-cell>
								<mat-cell *matCellDef="let message" (click)="viewStatus(message)">
									<span *ngIf="message.text.length <= 20">
										{{message.text }}
									</span>
									<mat-icon class="view" *ngIf="message.text.length > 20" (click)="viewSignatureDetails(message)">
										visibility
									</mat-icon>
								</mat-cell>
							</ng-container>

							<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
							<mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
						</mat-table>

						<div>
							<div class="mat-table__message" *ngIf="!dataSource.hasItems">{{ "MENU.NO_RECORDS" | translate }}</div>
						</div>
						<!-- Message for empty data  -->
						<div class="mat-table__message" *ngIf="dataSource.isPreloadTextViewed$ | async">{{
							"MENU.PLEASE_WAIT" |
							translate }}</div>
					</div>
					<div class="mat-table__bottom">
						<mat-spinner [color]="'primary'" [diameter]="20" *ngIf="dataSource.loading$ | async">
						</mat-spinner>
						<mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20]"
							[length]="dataSource.paginatorTotal$ | async" [showFirstLastButtons]="true"></mat-paginator>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- <div class="row">
		<div class="col-lg-4"></div>

		<div class="col-md-4 text-center">
			<mat-vertical-stepper linear="false" #stepper animationDuration="1000">
				<mat-step *ngFor="let item of selectedMessage.status">
					<ng-template matStepLabel>
						{{item.typeMessageStatusName}} - {{item.dateTime | date:'yyyy-MM-dd HH:mm:ss'}}
					</ng-template>
				</mat-step>

			</mat-vertical-stepper>
		</div>

		<div class="col-lg-4"></div>
	  </div> -->
	  <!-- /.Horizontal Steppers -->


</div>
